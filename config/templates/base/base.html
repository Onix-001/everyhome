{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}EveryHome{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Urbanist:wght@600;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'fontawesome/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap-grid.min.css' %}">
    <link rel="stylesheet" href="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}">

    <style>
        :root{
            --bg-nav:#050506;
            --bg-nav-soft:#151015;
            --accent:#7b1e24;
            --accent-soft:#a8333a;
            --text-main:#ffffff;
            --text-muted:#c9c9c9;
        }

        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
        }

        body{
            font-family:"Poppins",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
            background:#ffffff;
            color:#111;
        }

        .container{
            max-width:1100px;
            margin:auto;
            padding:0 20px;
        }

        /* ================= NAVBAR ================= */
        header.navbar{
            position:fixed;
            top:0;
            left:0;
            width:100%;
            z-index:1000;
            background:radial-gradient(circle at top left,#3b1518 0,#050506 55%,#050506 100%);
            color:var(--text-main);
            box-shadow:0 8px 30px rgba(0,0,0,.45);
        }

        .nav-content{
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:10px 20px;
            gap:18px;
        }

        .logo{
            font-family:"Urbanist",system-ui,sans-serif;
            font-weight:800;
            font-size:26px;
            letter-spacing:.04em;
            display:flex;
            align-items:center;
            gap:15px;
            color:#fff;
            position:relative;
            z-index:2;
            line-height:1;
        }
        .logo img{
            width:52px;
            height:52px;
            object-fit:contain;
            border-radius:999px;
            display:block;
            box-shadow:0 0 0 3px rgba(255,255,255,.18);
        }
        .logo span{
            color:var(--accent);
        }

        /* --- Nav links desktop --- */
        nav.primary-nav{
            display:flex;
            align-items:center;
            gap:18px;
            font-size:15px;
        }
        nav.primary-nav a{
            color:var(--text-main);
            text-decoration:none;
            font-weight:500;
            position:relative;
            padding:4px 0;
            transition:color .2s ease;
            white-space:nowrap;
        }
        nav.primary-nav a::after{
            content:"";
            position:absolute;
            left:0;
            bottom:-4px;
            width:0;
            height:2px;
            border-radius:999px;
            background:linear-gradient(90deg,var(--accent),var(--accent-soft));
            transition:width .22s ease;
        }
        nav.primary-nav a:hover{
            color:#fff;
        }
        nav.primary-nav a:hover::after{
            width:100%;
        }

        /* --- Auth buttons --- */
        .btn,
        .btn2{
            border-radius:999px;
            padding:6px 16px;
            font-size:14px;
            border:1px solid transparent;
            cursor:pointer;
            transition:all .2s ease;
            text-decoration:none;
            display:inline-flex;
            align-items:center;
            gap:6px;
        }
        .btn{
            background:var(--accent);
            color:#000000;
            box-shadow:0 8px 20px rgba(123,30,36,.35);
        }
        .btn:hover{
            background:#fff;
            color:#000000;
            border-color:rgba(0,0,0,.45);
            transform:translateY(-1px) scale(1.02);
            box-shadow:0 10px 26px rgba(0,0,0,.55);
        }
        .btn2{
            background:#fff;
            color: #000000;
        }
        .btn2:hover{
            background:var(--accent-soft);
            color:#000000;
            transform:translateY(-1px) scale(1.02);
            box-shadow:0 10px 26px rgba(0,0,0,.55);
        }

        /* ================= HAMBURGER TOGGLE ================= */
        .nav-toggle{
            display:none;
            width:40px;
            height:40px;
            border-radius:999px;
            border:1px solid rgba(255,255,255,.2);
            background:rgba(8,6,8,.9);
            backdrop-filter:blur(10px);
            -webkit-backdrop-filter:blur(10px);
            align-items:center;
            justify-content:center;
            cursor:pointer;
            position:relative;
            z-index:3;
        }
        .nav-toggle span,
        .nav-toggle span::before,
        .nav-toggle span::after{
            content:"";
            display:block;
            width:19px;
            height:2px;
            border-radius:999px;
            background:#ffffff;
            transition:transform .22s ease,opacity .18s ease,top .22s ease,bottom .22s ease;
            position:relative;
        }
        .nav-toggle span::before{
            position:absolute;
            top:-6px;
        }
        .nav-toggle span::after{
            position:absolute;
            bottom:-6px;
        }

        /* state when open */
        .nav-open .nav-toggle span{
            transform:rotate(45deg);
        }
        .nav-open .nav-toggle span::before{
            top:0;
            transform:rotate(90deg);
        }
        .nav-open .nav-toggle span::after{
            bottom:0;
            opacity:0;
        }

        /* ================= MOBILE MENU ================= */
        @media (max-width: 768px){
            .container{
                padding:0 16px;
            }
            .nav-content{
                padding:8px 16px;
            }

            nav.primary-nav{
                position:fixed;
                inset:60px 12px auto 12px;
                border-radius:16px;
                background:linear-gradient(145deg,rgba(10,7,9,.98),rgba(38,13,18,.96));
                box-shadow:0 20px 60px rgba(0,0,0,.75);
                padding:14px 16px 16px;
                flex-direction:column;
                align-items:flex-start;
                gap:10px;
                opacity:0;
                pointer-events:none;
                transform:translateY(-6px);
                transition:opacity .22s ease,transform .22s ease;
            }

            nav.primary-nav a{
                width:100%;
                padding:8px 10px;
                border-radius:999px;
                background:rgba(255,255,255,.02);
            }
            nav.primary-nav a::after{
                display:none;
            }

            .nav-actions{
                display:flex;
                flex-wrap:wrap;
                gap:8px;
                margin-top:6px;
                width:100%;
            }
            .nav-actions .btn,
            .nav-actions .btn2{
                flex:1 1 45%;
                justify-content:center;
            }

            .nav-open nav.primary-nav{
                opacity:1;
                pointer-events:auto;
                transform:translateY(0);
            }

            .nav-toggle{
                display:flex;
            }
        }

        /* Larger than 768px: arrange nav links & actions on one line */
        .nav-actions{
            display:flex;
            align-items:center;
            gap:10px;
        }
        @media (min-width: 769px){
            nav.primary-nav{
                gap:22px;
            }
        }

        /* ================= FOOTER ================= */
        footer{
            background:#111;
            color:#ccc;
            text-align:center;
            padding:20px;
            margin-top:5rem;
        }

        main{
            padding-top:86px; /* so content doesn’t pass under fixed navbar */
        }
        @media (max-width:768px){
            main{ padding-top:72px;}
        }
    </style>
</head>
<body>

<header class="navbar">
    <div class="container nav-content">
        <div class="logo">
            <img src="{% static 'img/logo every home blanc.png' %}" alt="EveryHome">
            Every<span>Home</span>
        </div>

        <!-- Bouton hamburger -->
        <button class="nav-toggle" aria-label="Ouvrir le menu" aria-expanded="false">
            <span></span>
        </button>

        <!-- Menu principal -->
        <nav class="primary-nav" aria-label="Navigation principale">
            <a href="{% url 'accueil:home' %}">Accueil</a>
            <a href="{% url 'logement:logement' %}">Logements</a>
            <a href="#">Contact</a>

            <div class="nav-actions">
                <a href="{% url 'account:login' %}" class="btn">
                    <i class="bi bi-box-arrow-in-right"></i> Connexion
                </a>
                <a href="{% url 'account:register' %}" class="btn2">
                    <i class="fas fa-user"></i> S'inscrire
                </a>
            </div>
        </nav>
    </div>
</header>

<main>
    {% block content %}
    {% endblock %}
</main>

<footer>
    <p>© 2025 EveryHome. Tous droits réservés.</p>
</footer>

{% block scripts %}{% endblock %}

<script>
    // Toggle du menu mobile
    (function () {
        const header = document.querySelector('header.navbar');
        const toggle = document.querySelector('.nav-toggle');
        const nav    = document.querySelector('nav.primary-nav');

        if (!toggle || !header || !nav) return;

        toggle.addEventListener('click', () => {
            const isOpen = header.classList.toggle('nav-open');
            toggle.setAttribute('aria-expanded', String(isOpen));
        });

        // Fermer le menu quand on clique sur un lien (sur mobile)
        nav.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (header.classList.contains('nav-open')) {
                    header.classList.remove('nav-open');
                    toggle.setAttribute('aria-expanded', 'false');
                }
            });
        });
    })();
</script>

</body>
</html>
